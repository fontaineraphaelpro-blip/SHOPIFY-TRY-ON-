<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VTON AI</title>
    <script src="https://cdn.shopify.com/shopifycloud/app-bridge.js" data-api-key="{{ api_key }}"></script>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Playfair+Display:ital,wght@0,600;1,600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="app-container">
        
        <div id="admin-only-zone">
            
            <header class="glass-header">
                <div class="brand">
                    <div class="logo-icon"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                    <div class="logo-text">
                        <h1>VTON<span>AI</span></h1>
                        <span class="badge-beta">PRO DASHBOARD</span>
                    </div>
                </div>
                <div class="system-status">
                    <span class="pulse-dot"></span> System Operational
                </div>
            </header>

            <div id="billing-section" class="stats-grid">
                
                <div class="stat-card credit-card-style">
                    <div class="card-bg-glow"></div>
                    <div class="card-top">
                        <span class="card-label">CURRENT BALANCE</span>
                        <i class="fa-brands fa-cc-stripe"></i>
                    </div>
                    <div class="credits-count">
                        <span id="credits">--</span>
                    </div>
                    <div class="card-bottom">
                        <span><i class="fa-solid fa-infinity"></i> Credits never expire</span>
                        <button onclick="document.querySelector('.pricing-container').scrollIntoView({behavior: 'smooth'})" class="btn-xs-glass">Refill</button>
                    </div>
                </div>

                <div class="stat-card analytics-card">
                    <div class="analytics-header">
                        <h3><i class="fa-solid fa-chart-line"></i> ROI Impact (30d)</h3>
                        <span class="trend-badge positive">+12% vs avg</span>
                    </div>
                    <div class="metrics-row">
                        <div class="metric">
                            <span class="m-label">Try-Ons</span>
                            <span class="m-value">842</span>
                        </div>
                        <div class="metric highlight">
                            <span class="m-label">Generated Sales</span>
                            <span class="m-value">â‚¬4,250</span>
                        </div>
                    </div>
                    <div class="mini-chart-bar">
                        <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                    </div>
                </div>
                
                <div class="stat-card smart-supply-card">
                    <div class="supply-header">
                        <h3><i class="fa-solid fa-gas-pump"></i> Credits Forecast</h3>
                        <span class="alert-badge">LOW STOCK</span>
                    </div>
                    <div class="supply-body">
                        <div class="runway-stat">
                            <span class="rs-label">Empty Tank In</span>
                            <span class="rs-value">3 Days</span>
                        </div>
                        <div class="burn-rate">
                            <i class="fa-solid fa-fire"></i> High Traffic Detected
                        </div>
                    </div>
                    <button onclick="document.querySelector('.pricing-container').scrollIntoView({behavior: 'smooth'})" class="btn-secure-stock">
                        âš¡ Secure Stock Now
                    </button>
                </div>
            </div>

            <div class="widget-studio-section">
                <div class="studio-header">
                    <h3><i class="fa-solid fa-paintbrush"></i> Widget Appearance</h3>
                    <p>Customize the "Try-On" button on your product pages.</p>
                </div>
                <div class="studio-workspace">
                    <div class="studio-controls">
                        <div class="control-group">
                            <label>Button Text</label>
                            <input type="text" id="ws-text" value="Try It On Now âœ¨" oninput="updateWidgetPreview()">
                        </div>
                        <div class="control-group-row">
                            <div class="control-group half">
                                <label>Background</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="ws-color" value="#000000" oninput="updateWidgetPreview()">
                                </div>
                            </div>
                            <div class="control-group half">
                                <label>Text Ink</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="ws-text-color" value="#ffffff" oninput="updateWidgetPreview()">
                                </div>
                            </div>
                        </div>
                        <button class="btn-save-widget" onclick="alert('Design saved to theme!')">Save Design</button>
                    </div>
                    <div class="studio-preview">
                        <div class="preview-label">Live Preview</div>
                        <div class="fake-product-page">
                            <div class="fake-img"></div>
                            <div class="fake-info">
                                <div class="fake-line title"></div>
                                <div class="fake-line price"></div>
                                <button id="ws-preview-btn" class="preview-widget-btn">
                                    <i class="fa-solid fa-shirt"></i> <span>Try It On Now âœ¨</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pricing-container">
                
                <div class="vip-section">
                    <div class="vip-header">
                        <span class="vip-title"><i class="fa-solid fa-crown"></i> Status: <strong>Silver Member</strong></span>
                        <span class="vip-next">Reach <strong>Gold</strong> for Priority GPU Speed <i class="fa-solid fa-bolt"></i></span>
                    </div>
                    <div class="vip-progress-bar">
                        <div class="vip-fill" style="width: 65%"></div>
                        <div class="vip-marker" style="left: 65%"><i class="fa-solid fa-star"></i></div>
                    </div>
                </div>

                <h2 class="section-title">Purchase Credits</h2>
                <p class="section-subtitle">1 Credit = 1 Virtual Try-On Result</p>

                <div class="pricing-row">
                    <div class="pricing-card" onclick="buy('pack_10', 0, this)">
                        <div class="pc-header">
                            <span class="pc-name">Starter Pack</span>
                            <span class="pc-credits">10</span>
                            <span class="pc-unit">Credits</span>
                        </div>
                        <div class="pc-price">
                            <span class="currency">â‚¬</span>4.99
                            <span class="per-try">â‚¬0.50 / try</span>
                        </div>
                        <ul class="pc-features">
                            <li><i class="fa-solid fa-check"></i> Standard Quality</li>
                            <li><i class="fa-solid fa-check"></i> Email Support</li>
                            <li><i class="fa-solid fa-check"></i> No Expiration</li>
                        </ul>
                        <button class="btn-buy">Buy Starter</button>
                    </div>

                    <div class="pricing-card featured" onclick="buy('pack_30', 0, this)">
                        <div class="popular-badge">MOST POPULAR</div>
                        <div class="pc-header">
                            <span class="pc-name">Growth Pack</span>
                            <span class="pc-credits">30</span>
                            <span class="pc-unit">Credits</span>
                        </div>
                        <div class="pc-price">
                            <span class="currency">â‚¬</span>12.99
                            <span class="per-try highlight">â‚¬0.43 / try</span>
                        </div>
                        <ul class="pc-features">
                            <li><i class="fa-solid fa-check"></i> <strong>High Speed GPU</strong></li>
                            <li><i class="fa-solid fa-check"></i> <strong>Best Conversion Rate</strong></li>
                            <li><i class="fa-solid fa-check"></i> Priority Support</li>
                        </ul>
                        <button class="btn-buy featured-btn">Buy Growth ðŸš€</button>
                    </div>

                    <div class="pricing-card" onclick="buy('pack_100', 0, this)">
                        <div class="pc-header">
                            <span class="pc-name">Business Pack</span>
                            <span class="pc-credits">100</span>
                            <span class="pc-unit">Credits</span>
                        </div>
                        <div class="pc-price">
                            <span class="currency">â‚¬</span>29.99
                            <span class="per-try">â‚¬0.30 / try</span>
                        </div>
                        <ul class="pc-features">
                            <li><i class="fa-solid fa-check"></i> Bulk Discount</li>
                            <li><i class="fa-solid fa-check"></i> Dedicated Manager</li>
                            <li><i class="fa-solid fa-check"></i> API Access</li>
                        </ul>
                        <button class="btn-buy">Buy Business</button>
                    </div>
                </div>

                <div class="bulk-link">
                    Need more? <span onclick="document.getElementById('customAmountWrapper').style.display='flex'">Order Custom Volume</span>
                    <div id="customAmountWrapper" style="display:none; margin-top:10px; gap:10px; justify-content:center;">
                        <input type="number" id="customAmount" placeholder="200" value="200" style="padding:5px; border-radius:5px; border:1px solid #ccc; width:80px;">
                        <button onclick="buyCustom(this)" class="btn-xs-glass" style="background:#333; color:white;">Go</button>
                    </div>
                </div>
            </div>

            <div class="divider">
                <span>TRY-ON PREVIEW TOOL</span>
            </div>
        </div>


        <div class="main-content">
            
            <div class="studio-grid">
                <label for="uImg" class="studio-box">
                    <div class="step-number">01</div>
                    <img id="prevU" src="" style="display:none;">
                    <div class="empty-state">
                        <div class="icon-circle"><i class="fa-solid fa-camera"></i></div>
                        <span class="fashion-font">Your Photo</span>
                    </div>
                    <input type="file" id="uImg" accept="image/*" onchange="preview('uImg', 'prevU')">
                </label>

                <label for="cImg" class="studio-box">
                    <div class="step-number">02</div>
                    <img id="prevC" src="" style="display:none;">
                    <div class="empty-state">
                        <div class="icon-circle"><i class="fa-solid fa-shirt"></i></div>
                        <span class="fashion-font">The Look</span>
                    </div>
                    <input type="file" id="cImg" accept="image/*" onchange="preview('cImg', 'prevC')">
                </label>
            </div>

            <div class="action-area">
                <button id="btnGo" onclick="generate()" class="btn-magic">
                    <span class="btn-content">Try It On Now <i class="fa-solid fa-wand-magic-sparkles"></i></span>
                    <div class="btn-glow"></div>
                </button>
            </div>

            <div id="resZone" style="display:none;" class="result-display">
                <div id="loader" style="display:none;">
                    <div class="spinner-modern"></div>
                    <p id="loader-text" class="fashion-loader-text">Analyzing silhouette...</p>
                </div>

                <img id="resImg" src="" style="display:none;">
                
                <div id="post-actions" style="display:none;" class="post-result-actions">
                    <button class="btn-shop-now" onclick="alert('Redirecting to Checkout...')">
                        Shop This Look <i class="fa-solid fa-bag-shopping"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
