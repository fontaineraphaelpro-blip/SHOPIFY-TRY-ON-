# ======================================
# shopify.app.toml - Avec App Proxy
# ======================================

client_id = "85e1a9dba888450e33b84fbb067bc3a5"
name = "Try-On StyleLab"
application_url = "https://stylelab-vtonn.onrender.com"
embedded = true

[access_scopes]
scopes = "write_products,read_products"

[auth]
redirect_urls = [
  "https://stylelab-vtonn.onrender.com/auth/callback",
  "https://stylelab-vtonn.onrender.com/auth/shopify/callback",
  "https://stylelab-vtonn.onrender.com/api/auth/callback"
]

# === APP PROXY (ESSENTIEL POUR MODE CLIENT) ===
[app_proxy]
url = "https://stylelab-vtonn.onrender.com"
subpath = "tryon"
prefix = "apps"

[webhooks]
api_version = "2025-01"

[[webhooks.subscriptions]]
topics = [
  "app/uninstalled",
  "products/update"
]
uri = "/webhooks/gdpr"

[[webhooks.subscriptions]]
compliance_topics = [
  "customers/data_request",
  "customers/redact",
  "shop/redact"
]
uri = "/webhooks/gdpr"
